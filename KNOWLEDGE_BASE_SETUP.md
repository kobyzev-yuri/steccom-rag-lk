# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π MediaWiki

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π –≤ MediaWiki –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –°–¢–≠–ö–ö–û–ú.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

### 1. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ KB —Ñ–∞–π–ª—ã
- **docs/kb/ui_*.json** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **docs/kb/legacy_reglament_*.json** - —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

### 2. –°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **scripts/upload_kb_to_mediawiki.py** - –∑–∞–≥—Ä—É–∑–∫–∞ KB –≤ MediaWiki
- **scripts/generate_knowledge_base.py** - —ç–∫—Å–ø–æ—Ä—Ç –∏–∑ MediaWiki
- **scripts/publish_kb_to_wiki.py** - –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MediaWiki

### 1. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ MediaWiki –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080
2. –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫: **–†—É—Å—Å–∫–∏–π**
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
   - –¢–∏–ø: **SQLite**
   - –ò–º—è: **mediawiki**
4. –°–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
   - –ò–º—è: **admin**
   - –ü–∞—Ä–æ–ª—å: **admin123**
5. –ó–∞–≤–µ—Ä—à–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º–µ–Ω

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Special:AllMessages**
3. –ù–∞–π–¥–∏—Ç–µ **Namespace:–°–¢–≠–ö–ö–û–ú**
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ: **–°–¢–≠–ö–ö–û–ú**

## –ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
source .venv/bin/activate

# –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö KB —Ñ–∞–π–ª–æ–≤
python3 scripts/upload_kb_to_mediawiki.py \
  --wiki-url http://localhost:8080/api.php \
  --username admin \
  --password admin123 \
  --create-index

# –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
python3 scripts/upload_kb_to_mediawiki.py \
  --wiki-url http://localhost:8080/api.php \
  --username admin \
  --password admin123 \
  --kb-file docs/kb/ui_capabilities.json
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ API

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
python3 get_token.py

# –ü—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ API
TOKEN="your_token" ./wiki.bash publish \
  --user admin --pass admin123 \
  --glob "docs/kb/*.json"
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ Streamlit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –û—Ç–∫—Ä–æ–π—Ç–µ Streamlit –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**
3. –í—ã–±–µ—Ä–∏—Ç–µ **MediaWiki Integration**
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
   - URL: `http://localhost:8080/api.php`
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `admin`
   - –ü–∞—Ä–æ–ª—å: `admin123`
5. –ù–∞–∂–º–∏—Ç–µ **üìö –ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤—Å–µ KB**

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –≤ MediaWiki

### –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω: –°–¢–≠–ö–ö–û–ú

```
–°–¢–≠–ö–ö–û–ú:–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (–∏–Ω–¥–µ–∫—Å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
‚îú‚îÄ‚îÄ –°–¢–≠–ö–ö–û–ú:–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
‚îú‚îÄ‚îÄ –°–¢–≠–ö–ö–û–ú:–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îú‚îÄ‚îÄ –°–¢–≠–ö–ö–û–ú:–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ –°–¢–≠–ö–ö–û–ú:–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ –°–¢–≠–ö–ö–û–ú:–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫
‚îú‚îÄ‚îÄ –°–¢–≠–ö–ö–û–ú:–†–µ–≥–ª–∞–º–µ–Ω—Ç GPS-—Ç—Ä–µ–∫–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ –°–¢–≠–ö–ö–û–ú:–†–µ–≥–ª–∞–º–µ–Ω—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ –°–¢–≠–ö–ö–û–ú:–†–µ–≥–ª–∞–º–µ–Ω—Ç SBD (—Ä—É—Å—Å–∫–∏–π)
‚îî‚îÄ‚îÄ –°–¢–≠–ö–ö–û–ú:–†–µ–≥–ª–∞–º–µ–Ω—Ç SBD (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
```

### –§–æ—Ä–º–∞—Ç —Å—Ç—Ä–∞–Ω–∏—Ü

–ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**: –∞—É–¥–∏—Ç–æ—Ä–∏—è, –æ–±–ª–∞—Å—Ç—å, —Å—Ç–∞—Ç—É—Å
- **–ò—Å—Ç–æ—á–Ω–∏–∫**: —Ñ–∞–π–ª, —É–∫–∞–∑–∞—Ç–µ–ª—å
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ–∫—Ü–∏–∏
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏**: –¥–∞—Ç–∞, –∏—Å—Ç–æ—á–Ω–∏–∫

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

1. **–°–æ–∑–¥–∞–π—Ç–µ KB —Ñ–∞–π–ª** –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:
```json
[
  {
    "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞",
    "audience": ["user", "admin"],
    "scope": ["billing", "reports"],
    "status": "reference",
    "content": [
      {
        "title": "–†–∞–∑–¥–µ–ª 1",
        "text": "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–∞–∑–¥–µ–ª–∞..."
      }
    ]
  }
]
```

2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤ MediaWiki**:
```bash
python3 scripts/upload_kb_to_mediawiki.py \
  --wiki-url http://localhost:8080/api.php \
  --username admin --password admin123 \
  --kb-file path/to/new_document.json
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

1. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ KB —Ñ–∞–π–ª**
2. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –≤ MediaWiki** (—Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É)

### –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ MediaWiki

```bash
# –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
python3 scripts/generate_knowledge_base.py \
  --wiki-url http://localhost:8080/api.php \
  --username admin --password admin123 \
  --output docs/kb/exported_knowledge_base.json

# –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
python3 scripts/generate_knowledge_base.py \
  --wiki-url http://localhost:8080/api.php \
  --username admin --password admin123 \
  --pages "–°–¢–≠–ö–ö–û–ú:–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" "–°–¢–≠–ö–ö–û–ú:–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è"
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π

### API Endpoints

- **POST /wiki/publish** - –ø—É–±–ª–∏–∫–∞—Ü–∏—è KB –≤ MediaWiki
- **GET /wiki/test-connection** - —Ç–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MediaWiki

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```python
from modules.integrations import MediaWikiClient, KBToWikiPublisher

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MediaWiki
client = MediaWikiClient(
    wiki_url="http://localhost:8080/api.php",
    username="admin",
    password="admin123"
)

# –ü—É–±–ª–∏–∫–∞—Ü–∏—è KB
publisher = KBToWikiPublisher(client)
results = publisher.publish_all_kb_files("docs/kb", "–°–¢–≠–ö–ö–û–ú")
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ MediaWiki
curl -I http://localhost:8080/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:8080/api.php

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sudo docker exec steccom-mediawiki sqlite3 /var/www/html/data/mediawiki.sqlite ".tables"
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö MediaWiki
sudo docker exec steccom-mediawiki sqlite3 /var/www/html/data/mediawiki.sqlite ".backup /var/www/html/backup.sqlite"

# –ë—ç–∫–∞–ø KB —Ñ–∞–π–ª–æ–≤
tar -czf kb_backup_$(date +%Y%m%d).tar.gz docs/kb/
```

### –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ MediaWiki
sudo docker stop steccom-mediawiki

# –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
sudo docker rm steccom-mediawiki

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ (–ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏)
sudo docker run -d --name steccom-mediawiki -p 8080:80 mediawiki:1.39
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
curl "http://localhost:8080/api.php?action=query&meta=siteinfo&format=json"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl "http://localhost:8080/api.php?action=query&list=users&ususers=admin&format=json"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

```bash
# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
sudo docker exec steccom-mediawiki chown -R www-data:www-data /var/www/html/data
sudo docker exec steccom-mediawiki chmod -R 755 /var/www/html/data
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sudo docker exec steccom-mediawiki sqlite3 /var/www/html/data/mediawiki.sqlite ".schema"

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
sudo docker cp backup.sqlite steccom-mediawiki:/var/www/html/data/mediawiki.sqlite
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ MediaWiki

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü

### –°–æ–¥–µ—Ä–∂–∏–º–æ–µ
- –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∏–Ω–¥–µ–∫—Å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 1.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-01-20  
**–ê–≤—Ç–æ—Ä:** –°–¢–≠–ö–ö–û–ú Development Team
